machine:
  #java:
  #  version: oraclejdk7
  environment:
    #ANDROID_HOME: /usr/local/android-sdk-linux
    NDK_VERSION: r9d
    ANDROID_NDK: $HOME/android-ndk-$NDK_VERSION
    ANDROID_NDK_HOME: $ANDROID_NDK
    PATH: $PATH:$ANDROID_NDK 

general:
  build_dir: DataApi

dependencies:
  cache_directories:
    - ~/android-ndk-$NDK_VERSION
  pre:
    - IF [[ ! -e ~/android-ndk-$NDK_VERSION ]]; then wget http://dl.google.com/android/ndk/android-ndk-$NDK_VERSION-linux-x86_64.tar.bz2; fi
  override:
    - echo y | android update sdk --no-ui --filter "android-23"
    - echo y | android update sdk --no-ui --filter "build-tools-23.0.1"
    - echo y | android update sdk --no-ui --filter "extra-android-m2repository"
    - echo y | android update sdk --no-ui --filter "extra-android-support"
    - echo y | android update sdk --no-ui --filter "extra-google-m2repository"

test:
  override:
    #- emulator -avd circleci-android22 -no-audio -no-window: 
        #background: true
        #parallel: true
    #- circle-android wait-for-boot 
    #- cd DataApi
    - ./gradlew assembleDebug
    #- ./gradlew connectedAndroidTest
    - cp -r ./DataApi/build/outputs $CIRCLE_ARTIFACTS

#deployment:
#  production: testcircledeploy
#    branch: master
#    commands:
#      - ./gradlew publishApkRelease
#  staging:
#    branch: master
