machine:
  java:
    version: oraclejdk7
  environmnet:
    ANDROID_HOME: /usr/local/android-sdk-linux
    #ANDROID_NDK: 

dependencies:
  override:
    - echo y | android update sdk --no-ui --filter "android-23"
    - echo y | android update sdk --no-ui --filter "build-tools-23.0.1"
    - echo y | android update sdk --no-ui --filter "extra-android-m2repository"
    - echo y | android update sdk --no-ui --filter "extra-android-support"
    - echo y | android update sdk --no-ui --filter "extra-google-m2repository"

test:
  override:
    - emulator -avd circleci-android22 -no-audio -no-window:
        background: true
        parallel:true
    - circle-android wait-for-boot
    build_dir: DataApi
    #- ./gradlew assembleDebug
    - ./gradlew connectedAndroidTest
    - cp -r ./DataApi/build/outputs $CIRCLE_ARTIFACTS

#deployment:
#  production: testcircledeploy
#    branch: master
#    commands:
#      - ./gradlew publishApkRelease
#  staging:
#    branch: master
